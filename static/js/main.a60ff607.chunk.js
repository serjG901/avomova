(this.webpackJsonpavomova=this.webpackJsonpavomova||[]).push([[0],{45:function(e,t,n){},46:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(12),i=n(2),c=n.n(i),r=n(37),s=n.n(r),l=(n(45),n(80)),o=n(81),d=n(83),u=n(4),b=(n(46),n(9)),h=n(11),p=n.n(h),x=n(0);function j(){return Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"text-white mb-2",children:["based on"," ",Object(x.jsx)("a",{className:"hover:underline",href:"https://anibel.net/",children:"ANIBEL.NET"})]}),Object(x.jsx)("div",{className:"text-white text-4xl font-bold p-2",children:"\u26ff AVOMOVA"})]})}var f="".concat(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"":"hover:bg-indigo-400"),m="\n    appearance-none \n    focus:outline-none \n    focus:shadow-outline\n    select-none\n    flex\n    justify-center\n    filter \n    drop-shadow-lg\n    transition \n    ease-linear \n    cursor-pointer \n    text-white \n    text-xl \n    m-1 \n    p-2 \n    ".concat(f,"\n    ");function g(e){var t=e.children,n=e.text,a=void 0===n?"":n,i=e.isActive,c=void 0!==i&&i,r=e.rounded,s=void 0!==r&&r,l=e.action,o=void 0===l?function(e){}:l,d=e.payload,u=void 0===d?"":d;return Object(x.jsx)("div",{onClick:function(){return u?o(u):o()},className:"\n        ".concat(m," \n        ").concat(c?"\n    bg-indigo-400\n    ":"\n    bg-indigo-900\n    "," \n        ").concat(s?"\n    h-12\n    w-12\n    rounded-full\n    ":"","\n        "),children:Object(x.jsx)("div",{className:"self-center",children:a||t})})}function v(e){var t=e.option,n=e.showOption;return Object(x.jsxs)("div",{className:"flex flex-wrap justify-end",children:[Object(x.jsx)(g,{text:"update",isActive:"all"===t,action:n,payload:"all"}),Object(x.jsx)(g,{text:"anime",isActive:"anime"===t,action:n,payload:"anime"}),Object(x.jsx)(g,{text:"manga",isActive:"manga"===t,action:n,payload:"manga"}),Object(x.jsx)(g,{text:"cinema",isActive:"cinema"===t,action:n,payload:"cinema"}),Object(x.jsx)(g,{text:"marks",isActive:"marks"===t,action:n,payload:"marks"})]})}function O(e){var t=e.search,n=e.handleSearch,a=i.useRef(null),c=i.useState(!1),r=Object(u.a)(c,2),s=r[0],l=r[1];return Object(x.jsxs)("div",{className:"flex justify-end w-full max-w-xs self-end mr-1 my-1",children:[Object(x.jsx)("input",{ref:a,className:"".concat(s?"flex-1 h-12 self-center px-2 text-xl appearance-none focus:outline-none focus:shadow-outline":"w-0 appearance-none"),value:t,onChange:function(e){n(e.currentTarget.value.trim())},maxLength:12,placeholder:"title or description"}),Object(x.jsx)("div",{className:"flex-1 flex-grow-0",title:s?"close search":"open search",children:Object(x.jsx)(g,{isActive:s,rounded:!0,action:function(){var e,t;(l(!s),s)?(n(""),null===(e=a.current)||void 0===e||e.blur()):null===(t=a.current)||void 0===t||t.focus()},children:"\ud83d\udd0e\ufe0e"})})]})}var y=n(18);function w(e){var t=e.tag,n=e.value,i=e.history;return Object(x.jsx)("div",{className:"\n    select-none\n    cursor-pointer\n    bg-indigo-900\n    max-w-max\n    text-white\n    px-1\n    mb-1\n    ml-1\n    hover:bg-indigo-400\n    ",title:"delete ".concat(n," from search"),onClick:function(){i.location.search.slice(1).split("&").length>1?i.push({search:"?".concat(p.a.stringify(Object(a.a)(Object(a.a)({},p.a.parse(i.location.search)),{},Object(y.a)({},"".concat(t),void 0))))}):i.push({search:""})},children:decodeURI(n.toString())},Math.random().toString())}function N(e){var t=e.history;return t.location.search?Object(x.jsxs)("div",{className:"fixed right-1 top-1/2 flex-col text-indigo-900 z-10 bg-white bg-opacity-90 p-1",children:[Object(x.jsx)("div",{children:"Filters:"}),t.location.search.slice(1).split("&").map((function(e){return e&&Object(x.jsx)(w,{tag:e.split("=")[0],value:e.split("=")[1],history:t},e)}))]}):null}var k,T,S,C,A,E=n(20),U=n(82),M=Object(U.a)(k||(k=Object(E.a)(["\n  query getMediaList(\n    $offset: Int!\n    $limit: Int!\n    $mediaType: MediaTypes!\n    $filters: MediaFilters\n  ) {\n    getMediaList(\n      offset: $offset\n      limit: $limit\n      mediaType: $mediaType\n      filters: $filters\n    ) {\n      docs {\n        mediaId\n        mediaType\n        title {\n          be\n          en\n        }\n        description {\n          be\n        }\n        slug\n        language\n        genres\n        studio\n        year\n        translators\n        dubbers\n        editors\n      }\n      totalDocs\n      limit\n      offset\n    }\n  }\n"]))),I=Object(U.a)(T||(T=Object(E.a)(["\n  query media($slug: String!, $mediaType: MediaTypes!) {\n    media(slug: $slug, mediaType: $mediaType) {\n      mediaId\n      title {\n        be\n        ru\n        en\n        alt\n      }\n      description {\n        be\n        ru\n        en\n      }\n      studio\n      status\n      poster\n      country\n      year\n      duraction {\n        start\n        end\n      }\n      date {\n        created\n        updated\n      }\n      language\n      translators\n      dubbers\n      editors\n      genres\n    }\n  }\n"]))),P=Object(U.a)(S||(S=Object(E.a)(["\n  query getUpdatesList($offset: Int!, $limit: Int!, $type: UpdateType) {\n    getUpdatesList(offset: $offset, limit: $limit, type: $type) {\n      docs {\n        title {\n          ru\n          be\n          en\n          alt\n        }\n        url\n        poster\n        type\n        description {\n          ru\n          be\n          en\n        }\n        duraction {\n          start\n          end\n        }\n        date {\n          created\n          updated\n        }\n      }\n      totalDocs\n    }\n  }\n"]))),$=Object(U.a)(C||(C=Object(E.a)(["\n  query media($slug: String!, $mediaType: MediaTypes!) {\n    media(slug: $slug, mediaType: $mediaType) {\n      mediaId\n      episodes {\n        id\n        mediaId\n        mediaType\n        contentType\n        type\n        episode\n        url\n        resource\n        thumbnail\n        view\n        date {\n          created\n          updated\n        }\n      }\n    }\n  }\n"]))),L=Object(U.a)(A||(A=Object(E.a)(["\n  query media($slug: String!, $mediaType: MediaTypes!) {\n    media(slug: $slug, mediaType: $mediaType) {\n      mediaId\n      chapters {\n        chapter\n        images {\n          large\n          thumbnail\n        }\n        view\n        date {\n          created\n          updated\n        }\n      }\n    }\n  }\n"]))),B=n(75);function D(e){var t=e.option,n=e.showOption;return Object(x.jsxs)("div",{className:"flex flex-wrap justify-end",children:[Object(x.jsx)(g,{text:"all",isActive:"all"===t,action:n,payload:"all"}),Object(x.jsx)(g,{text:"dub",isActive:"dub"===t,action:n,payload:"dub"}),Object(x.jsx)(g,{text:"sub",isActive:"sub"===t,action:n,payload:"sub"}),Object(x.jsx)(g,{text:"manga",isActive:"manga"===t,action:n,payload:"manga"})]})}var F="".concat(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"":"hover:text-indigo-900"),W="\n  transition \n  ease-linear \n  bg-red-500 \n  cursor-pointer \n  ".concat(F,"\n  "),q="\n  transition \n  ease-linear \n  bg-blue-500 \n  cursor-pointer \n  ".concat(F,"\n  ");function R(e){var t=e.value,n=e.mediaType,i=e.history;return Object(x.jsx)("div",{className:"\n  select-none\n  filter \n  drop-shadow-lg\n  absolute \n  top-1 \n  -left-1 \n  flex\n  flex-col\n  max-w-max\n  text-white\n  ",children:t.map((function(e){return Object(x.jsx)("div",{className:"px-1 ".concat("dub"===e?W:q),onClick:function(){return t=e,void i.push({pathname:"/avomova/".concat(n),search:"?".concat(p.a.stringify(Object(a.a)(Object(a.a)({},p.a.parse(i.location.search)),{},{language:t})))});var t},children:e},e)}))})}var V="".concat(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"":"hover:text-indigo-900"),z="\n  select-none\n  transition \n  ease-linear \n  filter \n  drop-shadow-lg\n  absolute \n  top-1 \n  -left-1 \n  flex\n  flex-col\n  max-w-max\n  text-white\n  cursor-pointer\n  ".concat(V,"\n  ");function J(e){var t=e.history;return Object(x.jsx)("div",{className:z,onClick:function(){return e="manga",void t.push({pathname:"/avomova/".concat(e),search:""});var e},children:Object(x.jsx)("div",{className:"px-1 bg-purple-500",children:"manga"})})}function Y(e){var t=e.value,n=e.duraction,a=e.date;return Object(x.jsx)("div",{className:"\n  filter\n  drop-shadow-lg\n  absolute \n  bottom-1 \n  -left-1 \n  flex\n  flex-col\n  max-w-max\n  text-white\n  ",children:Object(x.jsxs)("div",{className:"px-1 ".concat("finished"===t?"bg-green-500":"bg-yellow-500"),children:[Object(x.jsxs)("div",{children:[t," (",n.start," / ",n.end,")"]}),a?Object(x.jsx)("div",{className:"text-sm text-black",children:new Date(a.updated).toLocaleDateString()}):null]})})}function G(){return Object(x.jsxs)("div",{className:"animate-pulse flex w-full max-w-xs flex-col m-4",children:[Object(x.jsxs)("div",{className:"relative flex w-full max-w-xs pl-2 py-2 bg-purple-400 bg-opacity-20",children:[Object(x.jsx)("div",{className:"absolute top-1 -left-1 w-12 h-6 px-1 bg-white bg-opacity-50"}),Object(x.jsx)("div",{className:"absolute bottom-1 -left-1 px-1 bg-white bg-opacity-50 w-28 h-8"}),Object(x.jsx)("div",{className:"w-1/3 self-center h-24",children:Object(x.jsx)("img",{className:"opacity-50",src:"logo512.png",alt:"logo"})}),Object(x.jsx)("div",{className:"flex flex-col w-2/3 h-72 bg-white bg-opacity-50"})]}),Object(x.jsx)("div",{className:"w-full h-8 px-1 bg-indigo-900"})]})}function H(e){var t=e.poster,n=e.title,a=e.slug;return Object(x.jsx)("img",{className:"",src:"https://anibel.net/".concat(t),alt:"".concat(n.en,", ").concat(n.be,", ").concat(a)})}function K(e){var t=e.title,n=e.search;return Object(x.jsx)("div",{className:"\n  px-1\n  text-xl\n  text-indigo-900\n  text-left\n  leading-5\n  ",children:""!==n?t.be.replaceAll(n,"||".concat(n,"||")).replaceAll(n[0].toUpperCase()+n.slice(1),"||".concat(n[0].toUpperCase()+n.slice(1),"||")).split("||").map((function(e,t){return e===n||e===n[0].toUpperCase()+n.slice(1)?Object(x.jsx)("span",{className:"bg-indigo-400",children:e},t):e})):t.be})}function Q(e){var t=e.title,n=e.search;return Object(x.jsx)("div",{className:"\npx-1\ntext-sm \ntext-gray-800 \ntext-left\nitalic\nleading-5\n",children:""!==n?t.en.replaceAll(n,"||".concat(n,"||")).replaceAll(n[0].toUpperCase()+n.slice(1),"||".concat(n[0].toUpperCase()+n.slice(1),"||")).split("||").map((function(e,t){return e===n||e===n[0].toUpperCase()+n.slice(1)?Object(x.jsx)("span",{className:"bg-indigo-400",children:e},t):e})):t.en})}var X="".concat(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"":"hover:bg-indigo-400"),Z="\n  select-none\n  transition \n  ease-linear\n  cursor-pointer\n  bg-indigo-900\n  max-w-max\n  text-white\n  px-1\n  mb-1\n  ml-1\n  ".concat(X,"\n  ");function _(e){var t=e.tag,n=e.value,i=e.mediaType,c=e.notSearch,r=e.history,s=function(e){r.push({pathname:"/avomova/".concat(i),search:"?".concat(p.a.stringify(Object(a.a)(Object(a.a)({},p.a.parse(r.location.search)),{},Object(y.a)({},"".concat(t),e))))})};return Array.isArray(n)?Object(x.jsx)("div",{className:"flex flex-wrap",children:n.map((function(e){return Object(x.jsx)("div",{className:Z,title:"search for ".concat(e),onClick:function(){return s(e)},children:e},Math.random().toString())}))}):Object(x.jsx)("div",{className:c?"\n  max-w-max\n  text-indigo-900\n  px-1\n  mb-1\n  ml-1\n  ":Z,title:c?"":"search for ".concat(n),onClick:function(){c||s(n)},children:n})}function ee(e){var t=e.mediaType,n=e.country,a=e.year,i=e.studio,c=e.genres,r=e.translators,s=e.dubbers,l=e.editors,o=e.history;return Object(x.jsxs)("div",{className:"\nflex \nflex-wrap \nleading-5 \nmb-2\nmt-2\n",children:[n?Object(x.jsxs)("div",{className:"flex flex-col mx-1",children:[Object(x.jsx)("div",{className:"text-sm text-gray-700 text-left",children:"Country:"}),Object(x.jsx)(_,{notSearch:!0,tag:"country",value:n,mediaType:t,history:o})]}):null,a?Object(x.jsxs)("div",{className:"flex flex-col mx-1",children:[Object(x.jsx)("div",{className:"text-sm text-gray-700 text-left",children:"Year:"}),Object(x.jsx)(_,{tag:"year",value:a,mediaType:t,history:o})]}):null,i?Object(x.jsxs)("div",{className:"flex flex-col mx-1",children:[Object(x.jsx)("div",{className:"text-sm text-gray-700 text-left",children:"Studio:"}),Object(x.jsx)(_,{tag:"studio",value:i,mediaType:t,history:o})]}):null,0!==c.length?Object(x.jsxs)("div",{className:"flex flex-col mx-1",children:[Object(x.jsx)("div",{className:"text-sm text-gray-700 text-left",children:"Genres:"}),Object(x.jsx)(_,{tag:"genres",value:c,mediaType:t,history:o})]}):null,0!==r.length?Object(x.jsxs)("div",{className:"flex flex-col mx-1",children:[Object(x.jsx)("div",{className:"text-sm text-gray-700 text-left",children:"Translators:"}),Object(x.jsx)(_,{tag:"translators",value:r,mediaType:t,history:o})]}):null,0!==s.length?Object(x.jsxs)("div",{className:"flex flex-col mx-1",children:[Object(x.jsx)("div",{className:"text-sm text-gray-700 text-left",children:"Dubbers:"}),Object(x.jsx)(_,{tag:"dubbers",value:s,mediaType:t,history:o})]}):null,0!==l.length?Object(x.jsxs)("div",{className:"flex flex-col mx-1",children:[Object(x.jsx)("div",{className:"text-sm text-gray-700 text-left",children:"Editors:"}),Object(x.jsx)(_,{tag:"editors",value:l,mediaType:t,history:o})]}):null]})}function te(e){var t=e.description,n=e.search;return Object(x.jsxs)("div",{className:"\nflex\nflex-col\npy-1\npx-2 \ntext-base \ntext-black\ntext-left \nleading-5\n",children:[Object(x.jsx)("div",{className:"text-sm text-gray-700 text-left",children:"Description:"}),Object(x.jsx)("div",{children:""!==n?t.be.replaceAll(n,"||".concat(n,"||")).replaceAll(n[0].toUpperCase()+n.slice(1),"||".concat(n[0].toUpperCase()+n.slice(1),"||")).split("||").map((function(e,t){return e===n||e===n[0].toUpperCase()+n.slice(1)?Object(x.jsx)("span",{className:"bg-indigo-400",children:e},t):e})):t.be})]})}var ne=n(29),ae=n(74);function ie(){var e=i.useState(""),t=Object(u.a)(e,2),n=t[0],a=t[1];return i.useEffect((function(){var e=setTimeout((function(){a("..."===n?"":"".concat(n,"."))}),500);return function(){return clearTimeout(e)}}),[n]),Object(x.jsxs)("div",{className:"flex flex-row justify-center w-full animate-pulse",children:[Object(x.jsx)("div",{className:"w-1/2 text-right",children:"loading"}),Object(x.jsx)("div",{className:"w-1/2 text-left",children:n})]})}function ce(e,t){var n=i.useState((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(a){return console.log(a),t}})),a=Object(u.a)(n,2),c=a[0],r=a[1];return[c,function(t){try{var n=t instanceof Function?t(c):t;r(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(a){console.log(a)}}]}var re="\n  w-full \n  text-center\n  px-1\n  text-white \n  text-2xl \n  bg-indigo-900 \n";function se(e){var t=e.slug,n=e.mediaType,a=e.closePlayer,c=e.title,r=e.description,s=ce(t,""),l=Object(u.a)(s,2),o=l[0],d=l[1],b=ce("marks",[]),h=Object(u.a)(b,2),p=h[0],j=h[1],f=i.useState("top-0px"),m=Object(u.a)(f,2),g=m[0],v=m[1],O=i.useState({width:"360px",height:"240px"}),y=Object(u.a)(O,2),w=y[0],N=y[1],k=i.useState(""),T=Object(u.a)(k,2),S=T[0],C=T[1];console.log(t,n);var A=i.useState(!0),E=Object(u.a)(A,2),U=E[0],M=E[1],I=Object(ae.a)($,{variables:{slug:t,mediaType:n},fetchPolicy:"cache-and-network"}),P=I.loading,L=I.error,B=I.data;if(i.useEffect((function(){v("top-".concat(window.screenTop,"px"))}),[]),i.useEffect((function(){!P&&B&&C(""!==o?o:B.media.episodes[0].url)}),[P,B,o]),P)return Object(x.jsx)("button",{className:re,children:Object(x.jsx)(ie,{})});if(L)return Object(x.jsx)("button",{className:re,children:"error :("});var D=function(e){if("+"===e)switch(w.width){case"1215px":break;case"810px":N({width:"1215px",height:"810px"});break;case"540px":N({width:"810px",height:"540px"});break;case"360px":N({width:"540px",height:"360px"});break;case"240px":N({width:"360px",height:"240px"})}else switch(w.width){case"1215px":N({width:"810px",height:"540px"});break;case"810px":N({width:"540px",height:"360px"});break;case"540px":N({width:"360px",height:"240px"});break;case"360px":N({width:"240px",height:"160px"})}};return Object(x.jsxs)("div",{className:"".concat(g," absolute left-0 z-10 bg-black bg-opacity-90 w-full flex flex-col"),children:[Object(x.jsxs)("div",{className:"flex justify-between",children:[Object(x.jsxs)("div",{className:"flex self-center text-white",children:[Object(x.jsx)("div",{className:"".concat("240px"===w.width?"cursor-not-allowed":"cursor-pointer hover:bg-gray-600 hover:text-black"," px-4 mx-2 text-2xl rounded text-gray-600 border border-gray-600"),onClick:function(){D("-")},children:"-"}),Object(x.jsx)("div",{className:"".concat("1215px"===w.width?"cursor-not-allowed":"cursor-pointer hover:bg-gray-600 hover:text-black"," px-4 mx-2 text-2xl rounded text-gray-600 border border-gray-600"),onClick:function(){D("+")},children:"+"})]}),Object(x.jsx)("div",{onClick:function(){var e;e={slug:t,mediaType:n,title:c,description:r},p.find((function(t){return t.slug===e.slug}))?j(p.filter((function(t){return t.slug!==e.slug}))):j([].concat(Object(ne.a)(p),[e]))},className:"text-indigo-900 font-bold p-2 m-2 self-end cursor-pointer rounded border border-indigo-900 hover:bg-indigo-900 hover:text-black",children:p.find((function(e){return e.slug===t}))?"delete from marks":"add to marks"}),Object(x.jsx)("div",{title:"close reader",className:"text-red-900 font-bold p-2 m-2 self-end cursor-pointer rounded border border-red-900 hover:bg-red-900 hover:text-black",onClick:a,children:"close"})]}),Object(x.jsxs)("div",{className:"flex flex-col self-center",children:[Object(x.jsx)("iframe",{className:"".concat(U?"animate-pulse":""),title:"player",width:w.width,height:w.height,allowFullScreen:!0,src:S,onLoad:function(){return M(!1)},children:"Sorry!"}),Object(x.jsx)("div",{className:"".concat(U?"text-white animate-pulse":"text-opacity-0"),children:Object(x.jsx)(ie,{})})]}),Object(x.jsxs)("div",{className:"flex flex-col",children:[Object(x.jsx)("div",{className:"flex mb-4 flex-wrap p-2",children:B.media.episodes.map((function(e){return"dub"===e.type&&Object(x.jsxs)("div",{className:"".concat(S===e.url?"bg-gray-300":"bg-gray-700"," w-12 h-12 border border-black text-sm cursor-pointer transition ease-linear hover:bg-gray-300"),onClick:function(){M(!0),C(e.url),d(e.url)},children:[Object(x.jsx)("p",{children:e.episode}),Object(x.jsx)("p",{children:e.type})]},Math.random().toString())}))}),Object(x.jsx)("div",{className:"flex mb-4 flex-wrap p-2",children:B.media.episodes.map((function(e){return"sub"===e.type&&Object(x.jsxs)("div",{className:"".concat(S===e.url?"bg-gray-300":"bg-gray-700"," w-12 h-12 border border-black text-sm cursor-pointer transition ease-linear hover:bg-gray-300"),onClick:function(){M(!0),C(e.url),d(e.url)},children:[Object(x.jsx)("p",{children:e.episode}),Object(x.jsx)("p",{children:e.type})]},Math.random().toString())}))})]})]})}var le="\n  w-full \n  text-center\n  px-1\n  text-white \n  text-2xl \n  bg-indigo-900 \n";function oe(e){var t=e.slug,n=e.mediaType,a=e.closePlayer,c=e.title,r=e.description,s=ce(t,{chapter:0,page:0,image:""}),l=Object(u.a)(s,2),o=l[0],d=l[1],b=ce("marks",[]),h=Object(u.a)(b,2),p=h[0],j=h[1],f=i.useState("top-0px"),m=Object(u.a)(f,2),g=m[0],v=m[1],O=i.useState(""),y=Object(u.a)(O,2),w=y[0],N=y[1],k=i.useState(!0),T=Object(u.a)(k,2),S=T[0],C=T[1],A=i.useState(0),E=Object(u.a)(A,2),U=E[0],M=E[1],I=i.useState(1),P=Object(u.a)(I,2),$=P[0],B=P[1],D=i.useState("w-3/4"),F=Object(u.a)(D,2),W=F[0],q=F[1],R=i.useRef(null),V=Object(ae.a)(L,{variables:{slug:t,mediaType:n},fetchPolicy:"cache-and-network"}),z=V.loading,J=V.error,Y=V.data;if(i.useEffect((function(){v("top-".concat(window.screenTop,"px"))}),[]),i.useEffect((function(){!z&&Y&&(o&&""!==o.image?(N(o.image),B(o.chapter),M(o.page)):N(Y.media.chapters.find((function(e){return 1===e.chapter})).images[0].large))}),[z,Y,o]),z)return Object(x.jsx)("button",{className:le,children:Object(x.jsx)(ie,{})});if(J)return Object(x.jsx)("button",{className:le,children:"error :("});var G=function(e){if("+"===e)switch(W){case"w-3/4":break;case"w-2/4":q("w-3/4");break;case"w-1/4":q("w-2/4")}else switch(W){case"w-3/4":q("w-2/4");break;case"w-2/4":q("w-1/4")}};return Object(x.jsxs)("div",{ref:R,className:"".concat(g," absolute left-0 z-10 bg-black bg-opacity-90 w-full flex flex-col"),children:[Object(x.jsxs)("div",{className:"flex justify-between",children:[Object(x.jsxs)("div",{className:"flex self-center text-white",children:[Object(x.jsx)("div",{className:"".concat("w-1/4"===W?"cursor-not-allowed":"cursor-pointer hover:bg-gray-600 hover:text-black"," px-4 mx-2 text-2xl rounded text-gray-600 border border-gray-600"),onClick:function(){G("-")},children:"-"}),Object(x.jsx)("div",{className:"".concat("w-3/4"===W?"cursor-not-allowed":"cursor-pointer hover:bg-gray-600 hover:text-black"," px-4 mx-2 text-2xl rounded text-gray-600 border border-gray-600"),onClick:function(){G("+")},children:"+"})]}),Object(x.jsx)("div",{onClick:function(){var e;e={slug:t,mediaType:n,title:c,description:r},p.find((function(t){return t.slug===e.slug}))?j(p.filter((function(t){return t.slug!==e.slug}))):j([].concat(Object(ne.a)(p),[e]))},className:"text-indigo-900 font-bold p-2 m-2 self-end cursor-pointer rounded border border-indigo-900 hover:bg-indigo-900 hover:text-black",children:p.find((function(e){return e.slug===t}))?"delete from marks":"add to marks"}),Object(x.jsx)("div",{title:"close reader",className:"text-red-900 font-bold p-2 m-2 self-end cursor-pointer rounded border border-red-900 hover:bg-red-900 hover:text-black",onClick:a,children:"close"})]}),Object(x.jsxs)("div",{className:"flex flex-col self-center",children:[Object(x.jsx)("div",{className:"text-white ".concat(S?"animate-pulse":""),children:S?Object(x.jsx)(ie,{}):"chapter ".concat($,": page ").concat(U)}),Object(x.jsxs)("div",{className:"flex justify-center",children:[Object(x.jsx)("div",{title:"previous page",className:"px-2 flex justify-center items-center cursor-pointer w-1/6 text-white bg-gray-800 hover:bg-gray-600",onClick:function(){var e;S||(!function(){if(0!==U)C(!0),M(U-1),N(Y.media.chapters.find((function(e){return e.chapter===$})).images[U-1].large),d({chapter:$,page:U-1,image:Y.media.chapters.find((function(e){return e.chapter===$})).images[U-1].large});else{if(0!==U||1===$)return null;C(!0),B($-1),M(Y.media.chapters.find((function(e){return e.chapter===$-1})).images.length-1),N(Y.media.chapters.find((function(e){return e.chapter===$-1})).images[Y.media.chapters.find((function(e){return e.chapter===$-1})).images.length-1].large),d({chapter:$-1,page:Y.media.chapters.find((function(e){return e.chapter===$-1})).images.length-1,image:Y.media.chapters.find((function(e){return e.chapter===$-1})).images[Y.media.chapters.find((function(e){return e.chapter===$-1})).images.length-1].large})}}(),null===(e=R.current)||void 0===e||e.scrollIntoView())},children:Object(x.jsx)("div",{children:"prev"})}),Object(x.jsx)("img",{className:"".concat(W," ").concat(S?"animate-pulse":""),alt:t,src:w||"logo512.png",onLoad:function(){return C(!1)}}),Object(x.jsx)("div",{title:"next page",className:"px-2 flex justify-center items-center cursor-pointer w-1/6 text-white bg-gray-800 hover:bg-gray-600",onClick:function(){var e;S||(void 0!==Y.media.chapters.find((function(e){return e.chapter===$})).images[U+1]?(C(!0),M(U+1),N(Y.media.chapters.find((function(e){return e.chapter===$})).images[U+1].large),d({chapter:$,page:U+1,image:Y.media.chapters.find((function(e){return e.chapter===$})).images[U+1].large})):void 0!==Y.media.chapters.find((function(e){return e.chapter===$+1}))?(C(!0),B($+1),M(0),N(Y.media.chapters.find((function(e){return e.chapter===$+1})).images[0].large),d({chapter:$+1,page:0,image:Y.media.chapters.find((function(e){return e.chapter===$+1})).images[0].large})):(C(!0),B(1),M(0),N(Y.media.chapters.find((function(e){return 1===e.chapter})).images[0].large),d({chapter:1,page:0,image:Y.media.chapters.find((function(e){return 1===e.chapter})).images[0].large})),null===(e=R.current)||void 0===e||e.scrollIntoView())},children:Object(x.jsx)("div",{children:"next"})})]})]}),Object(x.jsx)("div",{className:"flex flex-wrap",children:Y.media.chapters.map((function(e){return Object(x.jsx)("div",{className:"flex mb-4 flex-wrap p-2",children:Object(x.jsxs)("div",{className:"flex flex-col",children:[Object(x.jsxs)("div",{className:"text-white text-left",children:["chapter ",e.chapter]}),Object(x.jsx)("div",{className:"flex flex-wrap",children:e.images.map((function(t,n){return Object(x.jsx)("div",{className:"".concat(w===t.large?"bg-gray-300":"bg-gray-900"," w-24 h-40 overflow-y-scroll scroll-none p-2 border border-black text-sm cursor-pointer transition ease-linear hover:bg-gray-300"),onClick:function(){var a;C(!0),B(e.chapter),M(n),N(t.large),d({chapter:e.chapter,page:n,image:t.large}),null===(a=R.current)||void 0===a||a.scrollIntoView()},children:Object(x.jsx)("img",{alt:"tittle",src:t.thumbnail,loading:"lazy"})},Math.random().toString())}))})]})},Math.random().toString())}))})]})}function de(e){var t=e.type,n=e.slug,a=e.title,c=e.description,r="";switch(t){case"anime":case"DUB":case"SUB":r="anime";break;case"cinema":case"CINEMA":r="cinema";break;case"manga":case"MANGA":r="manga"}var s=i.useState(!1),l=Object(u.a)(s,2),o=l[0],d=l[1],b=function(){o&&d(!1)};return Object(x.jsx)(x.Fragment,{children:o?"manga"===r?Object(x.jsx)(oe,{slug:n,mediaType:r,closePlayer:b,title:a,description:c}):Object(x.jsx)(se,{slug:n,mediaType:r,closePlayer:b,title:a,description:c}):Object(x.jsx)("button",{className:"\n  select-none\n  transition \n  ease-linear \n  w-full \n  text-center\n  px-1\n  text-white \n  text-2xl \n  bg-indigo-900 \n  hover:bg-indigo-400 \n",onClick:function(){o||d(!0)},children:"watch"})})}function ue(e){var t=e.url,n=e.type,a=e.duraction,c=e.date,r=e.history,s=e.search,l="anime";switch(n){case"dub":case"sub":l="anime";break;case"cinema":l="cinema";break;case"manga":l="manga"}var o=i.useState({loading:!0,error:void 0,data:{media:{language:[],poster:"",status:"",duraction:{start:0,end:0},title:{be:"",ru:"",en:"",alt:""},description:{be:"",ru:"",en:""},country:"",year:[],studio:"",genres:[],translators:[],dubbers:[],editors:[]}}}),d=Object(u.a)(o,2),b=d[0],h=d[1],p=i.useState(l),j=Object(u.a)(p,2),f=j[0],m=j[1],g=Object(B.a)(I,{variables:{slug:t,mediaType:f},fetchPolicy:"cache-and-network"}),v=Object(u.a)(g,2),O=v[0],y=v[1],w=y.loading,N=y.error,k=y.data;return i.useEffect((function(){var e=!1;return e||O(),function(){e=!0}}),[O]),i.useEffect((function(){var e=!1;return e||N&&"anime"===f&&m("cinema"),function(){e=!0}}),[N,f]),i.useEffect((function(){var e=!1;return e||w||N||!k||b.data!==k&&h({loading:w,error:N,data:k}),function(){e=!0}}),[b.data,w,N,k]),b.loading?Object(x.jsx)(G,{}):b.error?Object(x.jsxs)("p",{children:["Error for ",t]}):null!==b.data?Object(x.jsxs)("div",{className:"flex flex-col m-4",children:[Object(x.jsxs)("div",{className:"\nrelative \nflex \nw-full \nmax-w-xs \npl-2 \npy-2\nbg-purple-400\nbg-opacity-20\nbg-cover\n",style:{backgroundImage:"url(".concat("https://anibel.net/".concat(b.data.media.poster),")")},children:[b.data.media.language.length?Object(x.jsx)(R,{value:b.data.media.language,mediaType:l,history:r}):null,"manga"===l&&Object(x.jsx)(J,{history:r}),Object(x.jsx)(Y,{value:a.start===a.end?"finished":"ongoing",duraction:a,date:c}),Object(x.jsx)("div",{className:"w-1/3 self-center",children:Object(x.jsx)(H,{poster:b.data.media.poster,title:b.data.media.title,slug:t})}),Object(x.jsx)("div",{className:"flex flex-col w-2/3 h-72 overflow-y-auto scroll-none",children:Object(x.jsxs)("div",{className:"bg-white bg-opacity-90 flex flex-col",children:[Object(x.jsx)(K,{title:b.data.media.title,search:s}),Object(x.jsx)(Q,{title:b.data.media.title,search:s}),Object(x.jsx)(te,{description:b.data.media.description,search:s}),Object(x.jsx)(ee,{mediaType:l,country:b.data.media.country,year:b.data.media.year,studio:b.data.media.studio,genres:b.data.media.genres,translators:b.data.media.translators,dubbers:b.data.media.dubbers,editors:b.data.media.editors,history:r})]})})]}),Object(x.jsx)(de,{type:f,slug:t,title:b.data.media.title,description:b.data.media.description})]}):null}var be="".concat(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"":"hover:bg-indigo-400"),he="\n  select-none \n  flex \n  flex-col \n  my-4 \n  justify-center \n  items-center \n  w-full \n  h-18 \n  text-white \n  text-xl \n  bg-indigo-900\n  ";function pe(e){var t=e.pagination,n=e.length,a=e.action;return Object(x.jsxs)("div",{className:t<n?"cursor-pointer ".concat(he," ").concat(be):he,onClick:function(){return t<n&&a()},children:[Object(x.jsx)("div",{children:t<n?"show more":"no more"}),Object(x.jsxs)("div",{children:[t," from ",n]})]})}function xe(e){var t=e.type,n=void 0===t?"all":t,a=e.history,c=e.search,r=i.useState([]),s=Object(u.a)(r,2),l=s[0],o=s[1],d=i.useState(0),b=Object(u.a)(d,2),h=b[0],p=b[1],j=i.useState(0),f=Object(u.a)(j,2),m=f[0],g=f[1],v=Object(B.a)(P,{variables:{offset:0,limit:m,type:"ALL"},fetchPolicy:"cache-and-network"}),O=Object(u.a)(v,2),y=O[0],w=O[1],N=w.loading,k=w.error,T=w.data;if(i.useEffect((function(){var e=!1;return e||y(),function(){e=!0}}),[y]),i.useEffect((function(){var e=!1;return!e&&T&&(T.getUpdatesList.totalDocs>T.getUpdatesList.docs.length?g(T.getUpdatesList.totalDocs):o(T.getUpdatesList.docs.filter((function(e){return"all"===n||e.type===n.toUpperCase()})).filter((function(e){return""===c||(e.title.be.includes(c)||e.title.be.includes(c[0].toUpperCase()+c.slice(1))||e.title.en.includes(c)||e.title.en.includes(c[0].toUpperCase()+c.slice(1))||e.description.be.includes(c)||e.description.be.includes(c[0].toUpperCase()+c.slice(1)))})))),function(){e=!0}}),[T,n,c]),i.useEffect((function(){var e=!1;return e||p(l.length<10?l.length:10),function(){e=!0}}),[l.length]),console.log(l),k)return Object(x.jsx)("p",{children:"Error :("});if(N)return Object(x.jsx)("div",{className:"text-white m-4",children:Object(x.jsx)(ie,{})});return l.length?Object(x.jsxs)("div",{className:"flex flex-col",children:[Object(x.jsx)(D,{option:n,showOption:function(e){"all"===e?a.push({search:""}):a.push({search:"?type=".concat(e)})}}),Object(x.jsx)("div",{className:"flex flex-wrap",children:l.map((function(e,t){return t<h&&Object(x.jsx)(ue,{url:e.url,type:e.type.toLowerCase(),duraction:e.duraction,date:e.date,history:a,search:c},e.url+e.date.updated)}))}),T&&0!==h&&Object(x.jsx)(pe,{pagination:h,length:l.length,action:function(){T&&h!==l.length&&(h+10<l.length?p(h+10):p(l.length))}})]}):Object(x.jsx)("div",{className:"text-white m-4",children:"NOT FOUND"})}function je(e){e.mediaId;var t=e.slug,n=e.mediaType,a=e.history,c=e.search,r=i.useState({loading:!0,error:void 0,data:{media:{language:[],poster:"",status:"",duraction:{start:0,end:0},title:{be:"",ru:"",en:"",alt:""},description:{be:"",ru:"",en:""},country:"",year:[],studio:"",genres:[],translators:[],dubbers:[],editors:[]}}}),s=Object(u.a)(r,2),l=s[0],o=s[1],d=Object(B.a)(I,{variables:{slug:t,mediaType:n}}),b=Object(u.a)(d,2),h=b[0],p=b[1],j=p.loading,f=p.error,m=p.data;return i.useEffect((function(){var e=!1;return e||h(),function(){e=!0}}),[h]),i.useEffect((function(){var e=!1;return e||j||f||!m||l.data!==m&&o({loading:j,error:f,data:m}),function(){e=!0}}),[l.data,j,f,m]),l.loading?Object(x.jsx)(G,{}):l.error?Object(x.jsx)("p",{children:"Error :("}):Object(x.jsxs)("div",{className:"flex flex-col m-4",children:[Object(x.jsxs)("div",{className:"\nrelative \nflex \nw-full \nmax-w-xs \npl-2 \npy-2\nbg-purple-400\nbg-opacity-20\nbg-cover\n",style:{backgroundImage:"url(".concat("https://anibel.net/".concat(l.data.media.poster),")")},children:[l.data.media.language.length?Object(x.jsx)(R,{value:l.data.media.language,mediaType:n,history:a}):null,"manga"===n&&Object(x.jsx)(J,{history:a}),Object(x.jsx)(Y,{value:l.data.media.status,duraction:l.data.media.duraction}),Object(x.jsx)("div",{className:"w-1/3 self-center",children:Object(x.jsx)(H,{poster:l.data.media.poster,title:l.data.media.title,slug:t})}),Object(x.jsx)("div",{className:"flex flex-col w-2/3 h-72 overflow-y-auto scroll-none",children:Object(x.jsxs)("div",{className:"bg-white bg-opacity-90 flex flex-col",children:[Object(x.jsx)(K,{title:l.data.media.title,search:c}),Object(x.jsx)(Q,{title:l.data.media.title,search:c}),Object(x.jsx)(te,{description:l.data.media.description,search:c}),Object(x.jsx)(ee,{mediaType:n,country:l.data.media.country,year:l.data.media.year,studio:l.data.media.studio,genres:l.data.media.genres,translators:l.data.media.translators,dubbers:l.data.media.dubbers,editors:l.data.media.editors,history:a})]})})]}),Object(x.jsx)(de,{type:n,slug:t,title:l.data.media.title,description:l.data.media.description})]})}function fe(e){var t=e.mediaType,n=e.filters,a=void 0===n?{}:n,c=e.history,r=e.search,s=i.useState([]),l=Object(u.a)(s,2),o=l[0],d=l[1],b=i.useState(0),h=Object(u.a)(b,2),p=h[0],j=h[1],f=i.useState(0),m=Object(u.a)(f,2),g=m[0],v=m[1],O=Object(B.a)(M,{variables:{offset:0,limit:g,mediaType:t,filters:{hidden:!1}},fetchPolicy:"cache-and-network"}),y=Object(u.a)(O,2),w=y[0],N=y[1],k=N.loading,T=N.error,S=N.data;if(i.useEffect((function(){var e=!1;return e||w(),function(){e=!0}}),[w]),i.useEffect((function(){var e=!1;return!e&&S&&(S.getMediaList.totalDocs>S.getMediaList.docs.length?v(S.getMediaList.totalDocs):d(S.getMediaList.docs.filter((function(e){return 0===Object.keys(a).length||Object.keys(a).map((function(t){return"year"===t?e["".concat(t)]===+a["".concat(t)]:"studio"===t?e["".concat(t)]===a["".concat(t)]:e["".concat(t)]&&Array.isArray(e["".concat(t)])&&e["".concat(t)].includes(a["".concat(t)])})).every((function(e){return!0===e}))})).filter((function(e){return""===r||(e.title.be.includes(r)||e.title.be.includes(r[0].toUpperCase()+r.slice(1))||e.title.en.includes(r)||e.title.en.includes(r[0].toUpperCase()+r.slice(1))||e.description.be.includes(r)||e.description.be.includes(r[0].toUpperCase()+r.slice(1)))})))),function(){e=!0}}),[S,a,r]),i.useEffect((function(){var e=!1;return e||j(o.length<10?o.length:10),function(){e=!0}}),[o.length]),console.log(o),T)return Object(x.jsx)("p",{children:"Error :("});if(k)return Object(x.jsx)("div",{className:"text-white m-4",children:Object(x.jsx)(ie,{})});return o.length?Object(x.jsxs)("div",{className:"flex flex-col",children:[Object(x.jsx)("div",{className:"flex flex-wrap",children:o.map((function(e,t){return t<p&&Object(x.jsx)(je,{mediaId:e.mediaId,slug:e.slug,mediaType:e.mediaType,history:c,search:r},e.slug)}))}),S&&0!==p&&Object(x.jsx)(pe,{pagination:p,length:o.length,action:function(){S&&p!==o.length&&(p+10<o.length?j(p+10):j(o.length))}})]}):Object(x.jsx)("div",{className:"text-white m-4",children:"NOT FOUND"})}function me(e){var t=e.history,n=e.search,a=ce("marks",[]),c=Object(u.a)(a,1)[0],r=i.useState([]),s=Object(u.a)(r,2),l=s[0],o=s[1];return i.useEffect((function(){o(c.filter((function(e){return""===n||(e.title.be.includes(n)||e.title.be.includes(n[0].toUpperCase()+n.slice(1))||e.title.en.includes(n)||e.title.en.includes(n[0].toUpperCase()+n.slice(1))||e.description.be.includes(n)||e.description.be.includes(n[0].toUpperCase()+n.slice(1)))})))}),[n,c]),l.length?Object(x.jsx)("div",{className:"flex flex-wrap",children:l.map((function(e,a){return Object(x.jsx)(je,{mediaId:a,slug:e.slug,mediaType:e.mediaType,history:t,search:n},e.slug)}))}):Object(x.jsx)("div",{className:"text-white m-4",children:"NOT FOUND"})}function ge(e){return e.topY<-500?Object(x.jsx)("div",{className:"fixed right-1 bottom-24",onClick:function(){window.scrollTo(0,0)},title:"to top",children:Object(x.jsx)(g,{rounded:!0,children:"\u25b2"})}):null}function ve(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"\n        top-0 \n        back \n        fixed\n        h-screen \n        w-screen\n        bg-indigo-900\n        \n        "}),Object(x.jsx)("div",{className:"\n      top-0 \n      back \n      fixed\n      h-screen \n      w-screen\n      bg-gradient-to-b from-black via-indigo-900 to-black\n      opacity-50\n      "}),Object(x.jsx)("div",{className:"\n      top-0 \n      back \n      fixed\n      h-screen \n      w-screen\n      bg-gradient-to-r from-black via-gray-900 to-black\n      opacity-30\n      "})]})}var Oe="/avomova";function ye(){var e,t=i.useState(b.a.location.pathname==="".concat(Oe,"/")?"all":b.a.location.pathname.split("/")[2]),n=Object(u.a)(t,2),a=n[0],c=n[1],r=i.useState(p.a.parse(b.a.location.search).type?null===(e=p.a.parse(b.a.location.search).type)||void 0===e?void 0:e.toString():"all"),s=Object(u.a)(r,2),l=s[0],o=s[1],d=i.useState(""===b.a.location.search?{}:p.a.parse(b.a.location.search)),h=Object(u.a)(d,2),f=h[0],m=h[1],g=i.useState(""),y=Object(u.a)(g,2),w=y[0],k=y[1],T=i.useState(window.screenTop),S=Object(u.a)(T,2),C=S[0],A=S[1];i.useEffect((function(){var e=b.a.listen((function(e){var t,n=e.location;c(b.a.location.pathname==="".concat(Oe,"/")?"all":b.a.location.pathname.split("/")[2]),o(p.a.parse(b.a.location.search).type?null===(t=p.a.parse(b.a.location.search).type)||void 0===t?void 0:t.toString():"all"),m(""===n.search?{}:p.a.parse(n.search))}));return function(){return e()}})),i.useEffect((function(){var e=!1,t=function(){A(document.documentElement.getBoundingClientRect().top)};return e||window.addEventListener("scroll",t),function(){e=!0,window.removeEventListener("scroll",t)}}),[]);return Object(x.jsxs)("div",{className:"App flex flex-col",children:[Object(x.jsx)(j,{}),Object(x.jsx)(v,{option:a,showOption:function(e){"all"===e?b.a.push({pathname:"".concat(Oe,"/"),search:""}):b.a.push({pathname:"".concat(Oe,"/").concat(e),search:""})}}),Object(x.jsx)(O,{search:w,handleSearch:function(e){k(e)}}),Object(x.jsx)(N,{history:b.a}),Object(x.jsx)("div",{children:"all"===a?Object(x.jsx)(xe,{type:l,history:b.a,search:w.length>1?w:""}):"marks"===a?Object(x.jsx)(me,{history:b.a,search:w.length>1?w:""}):Object(x.jsx)(fe,{mediaType:a,filters:f,history:b.a,search:w.length>1?w:""})}),Object(x.jsx)(ge,{topY:C}),Object(x.jsx)(ve,{})]})}var we=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ne(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ke=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,85)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),c(e),r(e)}))},Te=new o.a({uri:"https://api-beta.anibel.net/graphql",cache:new d.a({typePolicies:{Media:{merge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(a.a)({existing:e},t)}}}})});s.a.render(Object(x.jsxs)(c.a.StrictMode,{children:[Object(x.jsx)(l.a,{client:Te,children:Object(x.jsx)(ye,{})}),","]}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/avomova",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/avomova","/service-worker.js");we?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ne(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Ne(t,e)}))}}(),ke()}},[[63,1,2]]]);
//# sourceMappingURL=main.a60ff607.chunk.js.map