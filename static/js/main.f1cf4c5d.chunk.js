(this.webpackJsonpavomova=this.webpackJsonpavomova||[]).push([[0],{44:function(e,t,n){},45:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var a,r,i,s,c,l=n(12),o=n(3),d=n.n(o),u=n(36),g=n.n(u),b=(n(44),n(77)),x=n(78),h=n(80),m=n(4),f=(n(45),n(20)),j=n(79),p=Object(j.a)(a||(a=Object(f.a)(["\n  query getMediaList(\n    $offset: Int!\n    $limit: Int!\n    $mediaType: MediaTypes!\n    $filters: MediaFilters\n  ) {\n    getMediaList(\n      offset: $offset\n      limit: $limit\n      mediaType: $mediaType\n      filters: $filters\n    ) {\n      docs {\n        mediaId\n        mediaType\n        slug\n        language\n        genres\n        studio\n        year\n        translators\n        dubbers\n        editors\n      }\n      totalDocs\n      limit\n      offset\n    }\n  }\n"]))),v=Object(j.a)(r||(r=Object(f.a)(["\n  query media($slug: String!, $mediaType: MediaTypes!) {\n    media(slug: $slug, mediaType: $mediaType) {\n      mediaId\n      title {\n        be\n        ru\n        en\n        alt\n      }\n      description {\n        be\n        ru\n        en\n      }\n      studio\n      status\n      poster\n      country\n      year\n      duraction {\n        start\n        end\n      }\n      date {\n        created\n        updated\n      }\n      language\n      translators\n      dubbers\n      editors\n      genres\n    }\n  }\n"]))),y=Object(j.a)(i||(i=Object(f.a)(["\n  query getUpdatesList($offset: Int!, $limit: Int!, $type: UpdateType) {\n    getUpdatesList(offset: $offset, limit: $limit, type: $type) {\n      docs {\n        title {\n          ru\n          be\n          en\n          alt\n        }\n        url\n        poster\n        type\n        description {\n          ru\n          be\n          en\n        }\n        duraction {\n          start\n          end\n        }\n        date {\n          created\n          updated\n        }\n      }\n      totalDocs\n    }\n  }\n"]))),O=Object(j.a)(s||(s=Object(f.a)(["\n  query media($slug: String!, $mediaType: MediaTypes!) {\n    media(slug: $slug, mediaType: $mediaType) {\n      mediaId\n      episodes {\n        id\n        mediaId\n        mediaType\n        contentType\n        type\n        episode\n        url\n        resource\n        thumbnail\n        view\n        date {\n          created\n          updated\n        }\n      }\n    }\n  }\n"]))),w=Object(j.a)(c||(c=Object(f.a)(["\n  query media($slug: String!, $mediaType: MediaTypes!) {\n    media(slug: $slug, mediaType: $mediaType) {\n      mediaId\n      chapters {\n        chapter\n        images {\n          large\n          thumbnail\n        }\n        view\n        date {\n          created\n          updated\n        }\n      }\n    }\n  }\n"]))),N=n(81),k=n(10),T=n.n(k),L=n(0);function S(e){var t=e.value,n=e.mediaType,a=e.history;return Object(L.jsx)("div",{className:"\n  filter \n  drop-shadow-lg\n  absolute \n  top-1 \n  -left-1 \n  flex\n  flex-col\n  max-w-max\n  text-white\n  ",children:t.map((function(e){return Object(L.jsx)("div",{className:"px-1 ".concat("dub"===e?"\n  transition \n  ease-linear \n  bg-red-500 \n  cursor-pointer \n  hover:text-indigo-900\n  ":"\n  transition \n  ease-linear \n  bg-blue-500 \n  cursor-pointer \n  hover:text-indigo-900\n  "),onClick:function(){return t=e,void a.push({pathname:"/".concat(n),search:"?".concat(T.a.stringify(Object(l.a)(Object(l.a)({},T.a.parse(a.location.search)),{},{language:t})))});var t},children:e},e)}))})}function A(e){var t=e.history;return Object(L.jsx)("div",{className:"\n  transition \n  ease-linear \n  filter \n  drop-shadow-lg\n  absolute \n  top-1 \n  -left-1 \n  flex\n  flex-col\n  max-w-max\n  text-white\n  cursor-pointer\n  hover:text-indigo-900\n  ",onClick:function(){return e="manga",void t.push({pathname:"/".concat(e),search:""});var e},children:Object(L.jsx)("div",{className:"px-1 bg-purple-500",children:"manga"})})}function C(e){var t=e.value,n=e.duraction,a=e.date;return Object(L.jsx)("div",{className:"\n  filter\n  drop-shadow-lg\n  absolute \n  bottom-1 \n  -left-1 \n  flex\n  flex-col\n  max-w-max\n  text-white\n  ",children:Object(L.jsxs)("div",{className:"px-1 ".concat("finished"===t?"bg-green-500":"bg-yellow-500"),children:[Object(L.jsxs)("div",{children:[t," (",n.start," / ",n.end,")"]}),a?Object(L.jsx)("div",{className:"text-sm text-black",children:new Date(a.updated).toLocaleDateString()}):null]})})}function M(){return Object(L.jsxs)("div",{className:"animate-pulse flex w-full max-w-xs pl-2 py-1 m-4 bg-purple-400",children:[Object(L.jsx)("div",{className:"w-1/3 bg-gray-500"}),Object(L.jsxs)("div",{className:"flex flex-col p-1 w-2/3",children:[Object(L.jsx)("div",{className:"text-xl text-white text-left bg-gray-500 h-24 rounded mb-1"}),Object(L.jsx)("div",{className:"text-sm text-gray-500 text-left bg-gray-500 h-12 rounded mb-1"}),Object(L.jsx)("div",{className:"text-base text-black text-left overflow-hidden h-36 bg-gray-500 rounded mb-1"})]})]})}function I(e){var t=e.poster,n=e.title,a=e.slug;return Object(L.jsx)("img",{className:"",src:"https://anibel.net/".concat(t),alt:"".concat(n.en,", ").concat(n.be,", ").concat(a)})}function U(e){var t=e.title;return Object(L.jsx)("div",{className:"\n  px-1\n  text-xl\n  text-indigo-900\n  text-left\n  leading-5\n  ",children:t.be})}function $(e){var t=e.title;return Object(L.jsx)("div",{className:"\npx-1\ntext-sm \ntext-gray-800 \ntext-left\nitalic\nleading-5\n",children:t.en})}var E=n(18),D="\n  transition \n  ease-linear\n  cursor-pointer\n  bg-indigo-900\n  max-w-max\n  text-white\n  px-1\n  mb-1\n  ml-1\n  hover:bg-indigo-400\n  ";function B(e){var t=e.tag,n=e.value,a=e.mediaType,r=e.notSearch,i=e.history,s=function(e){i.push({pathname:"/".concat(a),search:"?".concat(T.a.stringify(Object(l.a)(Object(l.a)({},T.a.parse(i.location.search)),{},Object(E.a)({},"".concat(t),e))))})};return Array.isArray(n)?Object(L.jsx)("div",{className:"flex flex-wrap",children:n.map((function(e){return Object(L.jsx)("div",{className:D,title:"search for ".concat(e),onClick:function(){return s(e)},children:e},Math.random().toString())}))}):Object(L.jsx)("div",{className:r?"\n  max-w-max\n  text-indigo-900\n  px-1\n  mb-1\n  ml-1\n  ":D,title:r?"":"search for ".concat(n),onClick:function(){r||s(n)},children:n})}function P(e){var t=e.mediaType,n=e.country,a=e.year,r=e.studio,i=e.genres,s=e.translators,c=e.dubbers,l=e.editors,o=e.history;return Object(L.jsxs)("div",{className:"\nflex \nflex-wrap \nleading-5 \nmb-2\nmt-2\n",children:[n?Object(L.jsxs)("div",{className:"flex flex-col mx-1",children:[Object(L.jsx)("div",{className:"text-sm text-gray-700 text-left",children:"Country:"}),Object(L.jsx)(B,{notSearch:!0,tag:"country",value:n,mediaType:t,history:o})]}):null,a?Object(L.jsxs)("div",{className:"flex flex-col mx-1",children:[Object(L.jsx)("div",{className:"text-sm text-gray-700 text-left",children:"Year:"}),Object(L.jsx)(B,{tag:"year",value:a,mediaType:t,history:o})]}):null,r?Object(L.jsxs)("div",{className:"flex flex-col mx-1",children:[Object(L.jsx)("div",{className:"text-sm text-gray-700 text-left",children:"Studio:"}),Object(L.jsx)(B,{tag:"studio",value:r,mediaType:t,history:o})]}):null,0!==i.length?Object(L.jsxs)("div",{className:"flex flex-col mx-1",children:[Object(L.jsx)("div",{className:"text-sm text-gray-700 text-left",children:"Genres:"}),Object(L.jsx)(B,{tag:"genres",value:i,mediaType:t,history:o})]}):null,0!==s.length?Object(L.jsxs)("div",{className:"flex flex-col mx-1",children:[Object(L.jsx)("div",{className:"text-sm text-gray-700 text-left",children:"Translators:"}),Object(L.jsx)(B,{tag:"translators",value:s,mediaType:t,history:o})]}):null,0!==c.length?Object(L.jsxs)("div",{className:"flex flex-col mx-1",children:[Object(L.jsx)("div",{className:"text-sm text-gray-700 text-left",children:"Dubbers:"}),Object(L.jsx)(B,{tag:"dubbers",value:c,mediaType:t,history:o})]}):null,0!==l.length?Object(L.jsxs)("div",{className:"flex flex-col mx-1",children:[Object(L.jsx)("div",{className:"text-sm text-gray-700 text-left",children:"Editors:"}),Object(L.jsx)(B,{tag:"editors",value:l,mediaType:t,history:o})]}):null]})}function F(e){var t=e.description;return Object(L.jsxs)("div",{className:"\nflex\nflex-col\npy-1\npx-2 \ntext-base \ntext-black\ntext-left \nleading-5\n",children:[Object(L.jsx)("div",{className:"text-sm text-gray-700 text-left",children:"Description:"}),Object(L.jsx)("div",{children:t.be})]})}var W=n(28);function G(){var e=o.useState(""),t=Object(m.a)(e,2),n=t[0],a=t[1];return o.useEffect((function(){var e=setTimeout((function(){a("..."===n?"":"".concat(n,"."))}),500);return function(){return clearTimeout(e)}}),[n]),Object(L.jsxs)("div",{className:"flex flex-row justify-center w-full animate-pulse",children:[Object(L.jsx)("div",{className:"w-1/2 text-right",children:"loading"}),Object(L.jsx)("div",{className:"w-1/2 text-left",children:n})]})}function V(e,t){var n=o.useState((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(a){return console.log(a),t}})),a=Object(m.a)(n,2),r=a[0],i=a[1];return[r,function(t){try{var n=t instanceof Function?t(r):t;i(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(a){console.log(a)}}]}var q="\n  w-full \n  text-center\n  px-1\n  text-white \n  text-2xl \n  bg-indigo-900 \n";function J(e){var t=e.slug,n=e.mediaType,a=e.closePlayer,r=V(t,""),i=Object(m.a)(r,2),s=i[0],c=i[1],l=V("marks",[]),d=Object(m.a)(l,2),u=d[0],g=d[1],b=o.useState("top-0px"),x=Object(m.a)(b,2),h=x[0],f=x[1],j=o.useState({width:"360px",height:"240px"}),p=Object(m.a)(j,2),v=p[0],y=p[1],w=o.useState(""),k=Object(m.a)(w,2),T=k[0],S=k[1];console.log(t,n);var A=o.useState(!0),C=Object(m.a)(A,2),M=C[0],I=C[1],U=Object(N.a)(O,{variables:{slug:t,mediaType:n},fetchPolicy:"cache-and-network"}),$=U.loading,E=U.error,D=U.data;if(o.useEffect((function(){f("top-".concat(window.screenX,"px"))}),[]),o.useEffect((function(){!$&&D&&S(""!==s?s:D.media.episodes[0].url)}),[$,D,s]),$)return Object(L.jsx)("button",{className:q,children:Object(L.jsx)(G,{})});if(E)return Object(L.jsx)("button",{className:q,children:"error :("});var B=function(e){if("+"===e)switch(v.width){case"1215px":break;case"810px":y({width:"1215px",height:"810px"});break;case"540px":y({width:"810px",height:"540px"});break;case"360px":y({width:"540px",height:"360px"});break;case"240px":y({width:"360px",height:"240px"})}else switch(v.width){case"1215px":y({width:"810px",height:"540px"});break;case"810px":y({width:"540px",height:"360px"});break;case"540px":y({width:"360px",height:"240px"});break;case"360px":y({width:"240px",height:"160px"})}};return Object(L.jsxs)("div",{className:"".concat(h," absolute left-0 z-10 bg-black bg-opacity-90 w-full flex flex-col"),children:[Object(L.jsxs)("div",{className:"flex justify-between",children:[Object(L.jsxs)("div",{className:"flex self-center text-white",children:[Object(L.jsx)("div",{className:"".concat("240px"===v.width?"cursor-not-allowed":"cursor-pointer hover:bg-gray-600 hover:text-black"," px-4 mx-2 text-2xl rounded text-gray-600 border border-gray-600"),onClick:function(){B("-")},children:"-"}),Object(L.jsx)("div",{className:"".concat("1215px"===v.width?"cursor-not-allowed":"cursor-pointer hover:bg-gray-600 hover:text-black"," px-4 mx-2 text-2xl rounded text-gray-600 border border-gray-600"),onClick:function(){B("+")},children:"+"})]}),Object(L.jsx)("div",{onClick:function(){var e;e={slug:t,mediaType:n},u.find((function(t){return t.slug===e.slug}))?g(u.filter((function(t){return t.slug!==e.slug}))):g([].concat(Object(W.a)(u),[e]))},className:"text-indigo-900 font-bold p-2 m-2 self-end cursor-pointer rounded border border-indigo-900 hover:bg-indigo-900 hover:text-black",children:u.find((function(e){return e.slug===t}))?"delete from marks":"add to marks"}),Object(L.jsx)("div",{title:"close reader",className:"text-red-900 font-bold p-2 m-2 self-end cursor-pointer rounded border border-red-900 hover:bg-red-900 hover:text-black",onClick:a,children:"close"})]}),Object(L.jsxs)("div",{className:"flex flex-col self-center",children:[Object(L.jsx)("iframe",{className:"".concat(M?"animate-pulse":""),title:"player",width:v.width,height:v.height,allowFullScreen:!0,src:T,onLoad:function(){return I(!1)},children:"Sorry!"}),Object(L.jsx)("div",{className:"".concat(M?"text-white animate-pulse":"text-opacity-0"),children:Object(L.jsx)(G,{})})]}),Object(L.jsxs)("div",{className:"flex flex-col",children:[Object(L.jsx)("div",{className:"flex mb-4 flex-wrap p-2",children:D.media.episodes.map((function(e){return"dub"===e.type&&Object(L.jsxs)("div",{className:"".concat(T===e.url?"bg-gray-300":"bg-gray-700"," w-12 h-12 border border-black text-sm cursor-pointer transition ease-linear hover:bg-gray-300"),onClick:function(){I(!0),S(e.url),c(e.url)},children:[Object(L.jsx)("p",{children:e.episode}),Object(L.jsx)("p",{children:e.type})]},Math.random().toString())}))}),Object(L.jsx)("div",{className:"flex mb-4 flex-wrap p-2",children:D.media.episodes.map((function(e){return"sub"===e.type&&Object(L.jsxs)("div",{className:"".concat(T===e.url?"bg-gray-300":"bg-gray-700"," w-12 h-12 border border-black text-sm cursor-pointer transition ease-linear hover:bg-gray-300"),onClick:function(){I(!0),S(e.url),c(e.url)},children:[Object(L.jsx)("p",{children:e.episode}),Object(L.jsx)("p",{children:e.type})]},Math.random().toString())}))})]})]})}var R="\n  w-full \n  text-center\n  px-1\n  text-white \n  text-2xl \n  bg-indigo-900 \n";function z(e){var t=e.slug,n=e.mediaType,a=e.closePlayer,r=V(t,{chapter:0,page:0,image:""}),i=Object(m.a)(r,2),s=i[0],c=i[1],l=V("marks",[]),d=Object(m.a)(l,2),u=d[0],g=d[1],b=o.useState("top-0px"),x=Object(m.a)(b,2),h=x[0],f=x[1],j=o.useState(""),p=Object(m.a)(j,2),v=p[0],y=p[1],O=o.useState(!0),k=Object(m.a)(O,2),T=k[0],S=k[1],A=o.useState(0),C=Object(m.a)(A,2),M=C[0],I=C[1],U=o.useState(1),$=Object(m.a)(U,2),E=$[0],D=$[1],B=o.useState("w-3/4"),P=Object(m.a)(B,2),F=P[0],q=P[1],J=o.useRef(null),z=Object(N.a)(w,{variables:{slug:t,mediaType:n},fetchPolicy:"cache-and-network"}),X=z.loading,Y=z.error,H=z.data;if(o.useEffect((function(){f("top-".concat(window.screenTop,"px"))}),[]),o.useEffect((function(){!X&&H&&(s&&""!==s.image?(y(s.image),D(s.chapter),I(s.page)):y(H.media.chapters.find((function(e){return 1===e.chapter})).images[0].large))}),[X,H,s]),X)return Object(L.jsx)("button",{className:R,children:Object(L.jsx)(G,{})});if(Y)return Object(L.jsx)("button",{className:R,children:"error :("});var K=function(e){if("+"===e)switch(F){case"w-3/4":break;case"w-2/4":q("w-3/4");break;case"w-1/4":q("w-2/4")}else switch(F){case"w-3/4":q("w-2/4");break;case"w-2/4":q("w-1/4")}};return Object(L.jsxs)("div",{ref:J,className:"".concat(h," absolute left-0 z-10 bg-black bg-opacity-90 w-full flex flex-col"),children:[Object(L.jsxs)("div",{className:"flex justify-between",children:[Object(L.jsxs)("div",{className:"flex self-center text-white",children:[Object(L.jsx)("div",{className:"".concat("w-1/4"===F?"cursor-not-allowed":"cursor-pointer hover:bg-gray-600 hover:text-black"," px-4 mx-2 text-2xl rounded text-gray-600 border border-gray-600"),onClick:function(){K("-")},children:"-"}),Object(L.jsx)("div",{className:"".concat("w-3/4"===F?"cursor-not-allowed":"cursor-pointer hover:bg-gray-600 hover:text-black"," px-4 mx-2 text-2xl rounded text-gray-600 border border-gray-600"),onClick:function(){K("+")},children:"+"})]}),Object(L.jsx)("div",{onClick:function(){var e;e={slug:t,mediaType:n},u.find((function(t){return t.slug===e.slug}))?g(u.filter((function(t){return t.slug!==e.slug}))):g([].concat(Object(W.a)(u),[e]))},className:"text-indigo-900 font-bold p-2 m-2 self-end cursor-pointer rounded border border-indigo-900 hover:bg-indigo-900 hover:text-black",children:u.find((function(e){return e.slug===t}))?"delete from marks":"add to marks"}),Object(L.jsx)("div",{title:"close reader",className:"text-red-900 font-bold p-2 m-2 self-end cursor-pointer rounded border border-red-900 hover:bg-red-900 hover:text-black",onClick:a,children:"close"})]}),Object(L.jsxs)("div",{className:"flex flex-col self-center",children:[Object(L.jsx)("div",{className:"text-white ".concat(T?"animate-pulse":""),children:T?Object(L.jsx)(G,{}):"chapter ".concat(E,": page ").concat(M)}),Object(L.jsxs)("div",{className:"flex justify-center",children:[Object(L.jsx)("div",{title:"previous page",className:"px-2 flex justify-center items-center cursor-pointer w-1/6 text-white bg-gray-800 hover:bg-gray-600",onClick:function(){var e;T||(!function(){if(0!==M)S(!0),I(M-1),y(H.media.chapters.find((function(e){return e.chapter===E})).images[M-1].large),c({chapter:E,page:M-1,image:H.media.chapters.find((function(e){return e.chapter===E})).images[M-1].large});else{if(0!==M||1===E)return null;S(!0),D(E-1),I(H.media.chapters.find((function(e){return e.chapter===E-1})).images.length-1),y(H.media.chapters.find((function(e){return e.chapter===E-1})).images[H.media.chapters.find((function(e){return e.chapter===E-1})).images.length-1].large),c({chapter:E-1,page:H.media.chapters.find((function(e){return e.chapter===E-1})).images.length-1,image:H.media.chapters.find((function(e){return e.chapter===E-1})).images[H.media.chapters.find((function(e){return e.chapter===E-1})).images.length-1].large})}}(),null===(e=J.current)||void 0===e||e.scrollIntoView())},children:Object(L.jsx)("div",{children:"prev"})}),Object(L.jsx)("img",{className:"".concat(F," ").concat(T?"animate-pulse":""),alt:t,src:v,onLoad:function(){return S(!1)}}),Object(L.jsx)("div",{title:"next page",className:"px-2 flex justify-center items-center cursor-pointer w-1/6 text-white bg-gray-800 hover:bg-gray-600",onClick:function(){var e;T||(void 0!==H.media.chapters.find((function(e){return e.chapter===E})).images[M+1]?(S(!0),I(M+1),y(H.media.chapters.find((function(e){return e.chapter===E})).images[M+1].large),c({chapter:E,page:M+1,image:H.media.chapters.find((function(e){return e.chapter===E})).images[M+1].large})):void 0!==H.media.chapters.find((function(e){return e.chapter===E+1}))?(S(!0),D(E+1),I(0),y(H.media.chapters.find((function(e){return e.chapter===E+1})).images[0].large),c({chapter:E+1,page:0,image:H.media.chapters.find((function(e){return e.chapter===E+1})).images[0].large})):(S(!0),D(1),I(0),y(H.media.chapters.find((function(e){return 1===e.chapter})).images[0].large),c({chapter:1,page:0,image:H.media.chapters.find((function(e){return 1===e.chapter})).images[0].large})),null===(e=J.current)||void 0===e||e.scrollIntoView())},children:Object(L.jsx)("div",{children:"next"})})]})]}),Object(L.jsx)("div",{className:"flex flex-wrap",children:H.media.chapters.map((function(e){return Object(L.jsx)("div",{className:"flex mb-4 flex-wrap p-2",children:Object(L.jsxs)("div",{className:"flex flex-col",children:[Object(L.jsxs)("div",{className:"text-white text-left",children:["chapter ",e.chapter]}),Object(L.jsx)("div",{className:"flex flex-wrap",children:e.images.map((function(t,n){return Object(L.jsx)("div",{className:"".concat(v===t.large?"bg-gray-300":"bg-gray-900"," w-24 h-40 overflow-y-scroll scroll-none p-2 border border-black text-sm cursor-pointer transition ease-linear hover:bg-gray-300"),onClick:function(){var a;S(!0),D(e.chapter),I(n),y(t.large),c({chapter:e.chapter,page:n,image:t.large}),null===(a=J.current)||void 0===a||a.scrollIntoView()},children:Object(L.jsx)("img",{alt:"tittle",src:t.thumbnail,loading:"lazy"})},Math.random().toString())}))})]})},Math.random().toString())}))})]})}function X(e){var t=e.type,n=e.slug,a="";switch(t){case"anime":case"DUB":case"SUB":a="anime";break;case"cinema":case"CINEMA":a="cinema";break;case"manga":case"MANGA":a="manga"}var r=o.useState(!1),i=Object(m.a)(r,2),s=i[0],c=i[1],l=function(){s&&c(!1)};return Object(L.jsx)(L.Fragment,{children:s?"manga"===a?Object(L.jsx)(z,{slug:n,mediaType:a,closePlayer:l}):Object(L.jsx)(J,{slug:n,mediaType:a,closePlayer:l}):Object(L.jsx)("button",{className:"\n  transition \n  ease-linear \n  w-full \n  text-center\n  px-1\n  text-white \n  text-2xl \n  bg-indigo-900 \n  hover:bg-indigo-400 \n",onClick:function(){s||c(!0)},children:"watch"})})}function Y(e){e.mediaId;var t=e.slug,n=e.mediaType,a=e.history,r=o.useState({loading:!0,error:void 0,data:{media:{language:[],poster:"",status:"",duraction:{start:0,end:0},title:{be:"",ru:"",en:"",alt:""},description:{be:"",ru:"",en:""},country:"",year:[],studio:"",genres:[],translators:[],dubbers:[],editors:[]}}}),i=Object(m.a)(r,2),s=i[0],c=i[1],l=Object(N.a)(v,{variables:{slug:t,mediaType:n}}),d=l.loading,u=l.error,g=l.data;return o.useEffect((function(){var e=!1;return e||d||u||!g||s.data!==g&&c({loading:d,error:u,data:g}),function(){e=!0}}),[s.data,d,u,g]),s.loading?Object(L.jsx)(M,{}):s.error?Object(L.jsx)("p",{children:"Error :("}):(console.log(n),Object(L.jsxs)("div",{className:"flex flex-col m-4",children:[Object(L.jsxs)("div",{className:"\nrelative \nflex \nw-full \nmax-w-xs \npl-2 \npy-2\nbg-purple-400\nbg-opacity-20\nbg-cover\n",style:{backgroundImage:"url(".concat("https://anibel.net/".concat(s.data.media.poster),")")},children:[s.data.media.language.length?Object(L.jsx)(S,{value:s.data.media.language,mediaType:n,history:a}):null,"manga"===n&&Object(L.jsx)(A,{history:a}),Object(L.jsx)(C,{value:s.data.media.status,duraction:s.data.media.duraction}),Object(L.jsx)("div",{className:"w-1/3 self-center",children:Object(L.jsx)(I,{poster:s.data.media.poster,title:s.data.media.title,slug:t})}),Object(L.jsx)("div",{className:"flex flex-col w-2/3 h-72 overflow-y-auto scroll-none",children:Object(L.jsxs)("div",{className:"bg-white bg-opacity-90 flex flex-col",children:[Object(L.jsx)(U,{title:s.data.media.title}),Object(L.jsx)($,{title:s.data.media.title}),Object(L.jsx)(F,{description:s.data.media.description}),Object(L.jsx)(P,{mediaType:n,country:s.data.media.country,year:s.data.media.year,studio:s.data.media.studio,genres:s.data.media.genres,translators:s.data.media.translators,dubbers:s.data.media.dubbers,editors:s.data.media.editors,history:a})]})})]}),Object(L.jsx)(X,{type:n,slug:t})]}))}function H(e){var t=e.mediaType,n=e.filters,a=void 0===n?{}:n,r=e.history,i=o.useRef(null),s=o.useState([]),c=Object(m.a)(s,2),l=c[0],d=c[1],u=o.useState(0),g=Object(m.a)(u,2),b=g[0],x=g[1],h=o.useState(0),f=Object(m.a)(h,2),j=f[0],v=f[1],y=Object(N.a)(p,{variables:{offset:0,limit:j,mediaType:t,filters:{hidden:!1}},fetchPolicy:"cache-and-network"}),O=y.loading,w=y.error,k=y.data;if(o.useEffect((function(){var e=!1;return e||O||!k||(x(l.filter((function(e){return 0===Object.keys(a).length||(a.language&&e.language&&e.language.includes(a.language)||a.genres&&e.genres&&e.genres.includes(a.genres)||a.studio&&e.studio&&e.studio===a.studio||a.year&&e.year&&e.year===+a.year||a.translators&&e.translators&&e.translators.includes(a.translators)||a.dubbers&&e.dubbers&&e.dubbers.includes(a.dubbers)||a.editors&&e.editors&&e.editors.includes(a.editors))})).length<10?l.filter((function(e){return 0===Object.keys(a).length||(a.language&&e.language&&e.language.includes(a.language)||a.genres&&e.genres&&e.genres.includes(a.genres)||a.studio&&e.studio&&e.studio===a.studio||a.year&&e.year&&e.year===+a.year||a.translators&&e.translators&&e.translators.includes(a.translators)||a.dubbers&&e.dubbers&&e.dubbers.includes(a.dubbers)||a.editors&&e.editors&&e.editors.includes(a.editors))})).length:10),k.getMediaList.totalDocs>k.getMediaList.docs.length?v(k.getMediaList.totalDocs):d(k.getMediaList.docs)),function(){e=!0}}),[k,O,l,a]),o.useEffect((function(){console.log(l)}),[l]),w)return Object(L.jsx)("p",{children:"Error :("});return k&&l.length?Object(L.jsxs)("div",{className:"flex flex-wrap",ref:i,children:[l.filter((function(e){return 0===Object.keys(a).length||(a.language&&e.language&&e.language.includes(a.language)||a.genres&&e.genres&&e.genres.includes(a.genres)||a.studio&&e.studio&&e.studio===a.studio||a.year&&e.year&&e.year===+a.year||a.translators&&e.translators&&e.translators.includes(a.translators)||a.dubbers&&e.dubbers&&e.dubbers.includes(a.dubbers)||a.editors&&e.editors&&e.editors.includes(a.editors))})).map((function(e,t){return t<b&&Object(L.jsx)(Y,{mediaId:e.mediaId,slug:e.slug,mediaType:e.mediaType,history:r},e.slug)})),k&&b!==l.filter((function(e){return 0===Object.keys(a).length||(a.language&&e.language&&e.language.includes(a.language)||a.genres&&e.genres&&e.genres.includes(a.genres)||a.studio&&e.studio&&e.studio===a.studio||a.year&&e.year&&e.year===+a.year||a.translators&&e.translators&&e.translators.includes(a.translators)||a.dubbers&&e.dubbers&&e.dubbers.includes(a.dubbers)||a.editors&&e.editors&&e.editors.includes(a.editors))})).length?Object(L.jsxs)("div",{className:"cursor-pointer flex flex-col my-4 justify-center items-center w-full h-18 text-white text-xl bg-indigo-900 hover:bg-indigo-400",onClick:function(){k&&b!==l.filter((function(e){return 0===Object.keys(a).length||(a.language&&e.language&&e.language.includes(a.language)||a.genres&&e.genres&&e.genres.includes(a.genres)||a.studio&&e.studio&&e.studio===a.studio||a.year&&e.year&&e.year===+a.year||a.translators&&e.translators&&e.translators.includes(a.translators)||a.dubbers&&e.dubbers&&e.dubbers.includes(a.dubbers)||a.editors&&e.editors&&e.editors.includes(a.editors))})).length&&(b+10<l.filter((function(e){return 0===Object.keys(a).length||(a.language&&e.language&&e.language.includes(a.language)||a.genres&&e.genres&&e.genres.includes(a.genres)||a.studio&&e.studio&&e.studio===a.studio||a.year&&e.year&&e.year===+a.year||a.translators&&e.translators&&e.translators.includes(a.translators)||a.dubbers&&e.dubbers&&e.dubbers.includes(a.dubbers)||a.editors&&e.editors&&e.editors.includes(a.editors))})).length?x(b+10):x(l.filter((function(e){return 0===Object.keys(a).length||(a.language&&e.language&&e.language.includes(a.language)||a.genres&&e.genres&&e.genres.includes(a.genres)||a.studio&&e.studio&&e.studio===a.studio||a.year&&e.year&&e.year===+a.year||a.translators&&e.translators&&e.translators.includes(a.translators)||a.dubbers&&e.dubbers&&e.dubbers.includes(a.dubbers)||a.editors&&e.editors&&e.editors.includes(a.editors))})).length))},children:[Object(L.jsx)("div",{children:"show more"}),Object(L.jsxs)("div",{children:[b," from"," ",l.filter((function(e){return 0===Object.keys(a).length||(a.language&&e.language&&e.language.includes(a.language)||a.genres&&e.genres&&e.genres.includes(a.genres)||a.studio&&e.studio&&e.studio===a.studio||a.year&&e.year&&e.year===+a.year||a.translators&&e.translators&&e.translators.includes(a.translators)||a.dubbers&&e.dubbers&&e.dubbers.includes(a.dubbers)||a.editors&&e.editors&&e.editors.includes(a.editors))})).length]})]}):Object(L.jsxs)("div",{className:"flex flex-col my-4 justify-center items-center w-full h-18 text-white text-xl bg-indigo-900",children:[Object(L.jsx)("div",{children:"no more"}),Object(L.jsxs)("div",{children:[b," from"," ",l.filter((function(e){return 0===Object.keys(a).length||(a.language&&e.language&&e.language.includes(a.language)||a.genres&&e.genres&&e.genres.includes(a.genres)||a.studio&&e.studio&&e.studio===a.studio||a.year&&e.year&&e.year===+a.year||a.translators&&e.translators&&e.translators.includes(a.translators)||a.dubbers&&e.dubbers&&e.dubbers.includes(a.dubbers)||a.editors&&e.editors&&e.editors.includes(a.editors))})).length]})]}),b>10&&Object(L.jsx)("div",{className:"filter drop-shadow-lg fixed px-2 py-4 cursor-pointer right-1 bottom-12 text-white rounded-full bg-indigo-900 hover:bg-indigo-500",onClick:function(){var e;return null===(e=i.current)||void 0===e?void 0:e.scrollIntoView()},children:"to UP"})]}):Object(L.jsx)("div",{className:"text-white m-4",children:O?Object(L.jsx)(G,{}):k?null:"NOT FOUND"})}function K(e){var t=e.url,n=e.type,a=e.duraction,r=e.date,i=e.history,s="anime";switch(n){case"DUB":case"SUB":s="anime";break;case"CINEMA":s="cinema";break;case"MANGA":s="manga"}var c=o.useState({loading:!0,error:void 0,data:{media:{language:[],poster:"",status:"",duraction:{start:0,end:0},title:{be:"",ru:"",en:"",alt:""},description:{be:"",ru:"",en:""},country:"",year:[],studio:"",genres:[],translators:[],dubbers:[],editors:[]}}}),l=Object(m.a)(c,2),d=l[0],u=l[1],g=o.useState(s),b=Object(m.a)(g,2),x=b[0],h=b[1],f=Object(N.a)(v,{variables:{slug:t,mediaType:x},fetchPolicy:"cache-and-network"}),j=f.loading,p=f.error,y=f.data;return o.useEffect((function(){p&&"anime"===x&&h("cinema")}),[p,x]),o.useEffect((function(){var e=!1;return e||j||p||!y||d.data!==y&&u({loading:j,error:p,data:y}),function(){e=!0}}),[d.data,j,p,y]),d.loading?Object(L.jsx)(M,{}):d.error?Object(L.jsxs)("p",{children:["Error for ",t]}):null!==d.data?Object(L.jsxs)("div",{className:"flex flex-col m-4",children:[Object(L.jsxs)("div",{className:"\nrelative \nflex \nw-full \nmax-w-xs \npl-2 \npy-2\nbg-purple-400\nbg-opacity-20\nbg-cover\n",style:{backgroundImage:"url(".concat("https://anibel.net/".concat(d.data.media.poster),")")},children:[d.data.media.language.length?Object(L.jsx)(S,{value:d.data.media.language,mediaType:s,history:i}):null,"manga"===s&&Object(L.jsx)(A,{history:i}),Object(L.jsx)(C,{value:a.start===a.end?"finished":"ongoing",duraction:a,date:r}),Object(L.jsx)("div",{className:"w-1/3 self-center",children:Object(L.jsx)(I,{poster:d.data.media.poster,title:d.data.media.title,slug:t})}),Object(L.jsx)("div",{className:"flex flex-col w-2/3 h-72 overflow-y-auto scroll-none",children:Object(L.jsxs)("div",{className:"bg-white bg-opacity-90 flex flex-col",children:[Object(L.jsx)(U,{title:d.data.media.title}),Object(L.jsx)($,{title:d.data.media.title})," ",Object(L.jsx)(F,{description:d.data.media.description}),Object(L.jsx)(P,{mediaType:s,country:d.data.media.country,year:d.data.media.year,studio:d.data.media.studio,genres:d.data.media.genres,translators:d.data.media.translators,dubbers:d.data.media.dubbers,editors:d.data.media.editors,history:i})]})})]}),Object(L.jsx)(X,{type:x,slug:t})]}):null}function Q(e){var t=e.type,n=e.history,a=o.useRef(null),r=o.useState([]),i=Object(m.a)(r,2),s=i[0],c=i[1],l=o.useState(0),d=Object(m.a)(l,2),u=d[0],g=d[1],b=o.useState(0),x=Object(m.a)(b,2),h=x[0],f=x[1],j=Object(N.a)(y,{variables:{offset:0,limit:h,type:"ALL"},fetchPolicy:"cache-and-network"}),p=j.loading,v=j.error,O=j.data;if(o.useEffect((function(){var e=!1;return e||p||!O||(g(s.filter((function(e){return"ALL"===t||e.type===t})).length<10?s.filter((function(e){return"ALL"===t||e.type===t})).length:10),O.getUpdatesList.totalDocs>O.getUpdatesList.docs.length?f(O.getUpdatesList.totalDocs):c(O.getUpdatesList.docs)),function(){e=!0}}),[O,p,s,t]),o.useEffect((function(){console.log(s)}),[s]),v)return Object(L.jsx)("p",{children:"Error :("});var w=function(e){"ALL"===e?n.push({pathname:"".concat(n.location.pathname),search:""}):n.push({pathname:"".concat(n.location.pathname),search:"?type=".concat(e)})};return O&&s.length?Object(L.jsxs)("div",{className:"flex flex-col",ref:a,children:[Object(L.jsxs)("div",{className:"flex flex-wrap",children:[Object(L.jsx)("div",{onClick:function(){return w("ALL")},className:"transition ease-linear cursor-pointer text-white text-xl p-2 m-1 hover:bg-indigo-400 ".concat("ALL"===t?"bg-indigo-400":"bg-indigo-900"),children:"ALL"}),Object(L.jsx)("div",{onClick:function(){return w("dub")},className:"transition ease-linear cursor-pointer text-white text-xl p-2 m-1 hover:bg-indigo-400 ".concat("DUB"===t?"bg-indigo-400":"bg-indigo-900"),children:"DUB"}),Object(L.jsx)("div",{onClick:function(){return w("sub")},className:"transition ease-linear cursor-pointer text-white text-xl p-2 m-1 hover:bg-indigo-400 ".concat("SUB"===t?"bg-indigo-400":"bg-indigo-900"),children:"SUB"}),Object(L.jsx)("div",{onClick:function(){return w("manga")},className:"transition ease-linear cursor-pointer text-white text-xl p-2 m-1 hover:bg-indigo-400 ".concat("MANGA"===t?"bg-indigo-400":"bg-indigo-900"),children:"MANGA"})]}),Object(L.jsxs)("div",{className:"flex flex-wrap",children:[s.filter((function(e){return"ALL"===t||e.type===t})).map((function(e,t){return t<u&&Object(L.jsx)(K,{url:e.url,type:e.type,duraction:e.duraction,date:e.date,history:n},e.url+e.date.updated)})),O&&u!==s.filter((function(e){return"ALL"===t||e.type===t})).length?Object(L.jsxs)("div",{className:"cursor-pointer flex flex-col my-4 justify-center items-center w-full h-18 text-white text-xl bg-indigo-900 hover:bg-indigo-400",onClick:function(){O&&u!==s.filter((function(e){return"ALL"===t||e.type===t})).length&&(u+10<s.filter((function(e){return"ALL"===t||e.type===t})).length?g(u+10):g(s.filter((function(e){return"ALL"===t||e.type===t})).length))},children:[Object(L.jsx)("div",{children:"show more"}),Object(L.jsxs)("div",{children:[u," from"," ",s.filter((function(e){return"ALL"===t||e.type===t})).length]})]}):Object(L.jsxs)("div",{className:"flex flex-col my-4 justify-center items-center w-full h-18 text-white text-xl bg-indigo-900",children:[Object(L.jsx)("div",{children:"no more"}),Object(L.jsxs)("div",{children:[u," from"," ",s.filter((function(e){return"ALL"===t||e.type===t})).length]})]})]}),u>10&&Object(L.jsx)("div",{className:"filter drop-shadow-lg fixed px-2 py-4 cursor-pointer right-1 bottom-24 text-white rounded-full bg-indigo-900 hover:bg-indigo-500",onClick:function(){var e;return null===(e=a.current)||void 0===e?void 0:e.scrollIntoView()},children:"to UP"})]}):Object(L.jsx)("div",{className:"text-white m-4",children:p?Object(L.jsx)(G,{}):O?null:"NOT FOUND"})}function Z(e){var t=e.history,n=V("marks",[]),a=Object(m.a)(n,1)[0];return a.length?Object(L.jsx)("div",{className:"flex flex-wrap",children:a.map((function(e,n){return Object(L.jsx)(Y,{mediaId:n,slug:e.slug,mediaType:e.mediaType,history:t},e.slug)}))}):Object(L.jsx)("div",{className:"text-white m-4",children:"NOT FOUND"})}function _(){return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("div",{className:"\n        top-0 \n        back \n        fixed\n        h-screen \n        w-screen\n        bg-indigo-900\n        \n        "}),Object(L.jsx)("div",{className:"\n      top-0 \n      back \n      fixed\n      h-screen \n      w-screen\n      bg-gradient-to-b from-black via-indigo-900 to-black\n      opacity-50\n      "}),Object(L.jsx)("div",{className:"\n      top-0 \n      back \n      fixed\n      h-screen \n      w-screen\n      bg-gradient-to-r from-black via-gray-900 to-black\n      opacity-30\n      "})]})}var ee=n(8);function te(e){var t=e.tag,n=e.value,a=e.history;return Object(L.jsx)("div",{className:"\n    cursor-pointer\n    bg-indigo-900\n    max-w-max\n    text-white\n    px-1\n    mb-1\n    ml-1\n    hover:bg-indigo-400\n    ",title:"delete ".concat(n," from search"),onClick:function(){a.location.search.split("&").length>1?a.push({search:"?".concat(T.a.stringify(Object(l.a)(Object(l.a)({},T.a.parse(a.location.search)),{},Object(E.a)({},"".concat(t),void 0))))}):a.push({search:""})},children:n},Math.random().toString())}function ne(){var e=o.useState((function(){return"/"===ee.a.location.pathname?"ALL":"/marks"===ee.a.location.pathname?"marks":ee.a.location.pathname.slice(1)})),t=Object(m.a)(e,2),n=t[0],a=t[1],r=o.useState((function(){return"manga"===T.a.parse(ee.a.location.search).type?"MANGA":"dub"===T.a.parse(ee.a.location.search).type?"DUB":"sub"===T.a.parse(ee.a.location.search).type?"SUB":"ALL"})),i=Object(m.a)(r,2),s=i[0],c=i[1],l=o.useState(""===ee.a.location.search?{}:T.a.parse(ee.a.location.search)),d=Object(m.a)(l,2),u=d[0],g=d[1];o.useEffect((function(){var e=ee.a.listen((function(e){var t=e.location;e.action;console.log(t),"/"===ee.a.location.pathname?a("ALL"):"/marks"===ee.a.location.pathname?a("marks"):a(ee.a.location.pathname.slice(1)),"manga"===T.a.parse(ee.a.location.search).type?c("MANGA"):"dub"===T.a.parse(ee.a.location.search).type?c("DUB"):"sub"===T.a.parse(ee.a.location.search).type?c("SUB"):c("ALL"),g(""===t.search?{}:T.a.parse(ee.a.location.search)),"?"===ee.a.location.search&&ee.a.replace({search:""})}));return function(){return e()}}));var b=function(e){ee.a.push({pathname:"/".concat(e),search:""})};return Object(L.jsxs)("div",{className:"App flex flex-col",children:[Object(L.jsxs)("div",{className:"text-white mb-2",children:["based on"," ",Object(L.jsx)("a",{className:"hover:underline",href:"https://anibel.net/",children:"ANIBEL.NET"})]}),Object(L.jsx)("div",{className:"text-white text-4xl font-bold p-2",children:"\u26ff AVOMOVA"}),Object(L.jsxs)("div",{className:"flex flex-wrap justify-end",children:[Object(L.jsx)("div",{onClick:function(){return b("")},className:"transition ease-linear cursor-pointer text-white text-xl p-2 m-1 hover:bg-indigo-400 ".concat("ALL"===n?"bg-indigo-400":"bg-indigo-900"),children:"last update"}),Object(L.jsx)("div",{onClick:function(){return b("anime")},className:"transition ease-linear cursor-pointer text-white text-xl p-2 m-1 hover:bg-indigo-400 ".concat("anime"===n?"bg-indigo-400":"bg-indigo-900"),children:"anime"}),Object(L.jsx)("div",{onClick:function(){return b("manga")},className:"transition ease-linear cursor-pointer text-white text-xl p-2 m-1 hover:bg-indigo-400 ".concat("manga"===n?"bg-indigo-400":"bg-indigo-900"),children:"manga"}),Object(L.jsx)("div",{onClick:function(){return b("cinema")},className:"transition ease-linear cursor-pointer text-white text-xl p-2 m-1 hover:bg-indigo-400 ".concat("cinema"===n?"bg-indigo-400":"bg-indigo-900"),children:"cinema"}),Object(L.jsx)("div",{onClick:function(){return b("marks")},className:"transition ease-linear cursor-pointer text-white text-xl p-2 m-1 hover:bg-indigo-400 ".concat("marks"===n?"bg-indigo-400":"bg-indigo-900"),children:"marks"})]}),ee.a.location.search&&Object(L.jsxs)("div",{className:"fixed right-1 top-1/4 flex-col text-white",children:[Object(L.jsx)("div",{children:"Filters:"}),ee.a.location.search.slice(1).split("&").map((function(e){return e&&Object(L.jsx)(te,{tag:e.split("=")[0],value:e.split("=")[1],history:ee.a},e)}))]}),Object(L.jsx)("div",{children:"ALL"===n?Object(L.jsx)(Q,{type:s,history:ee.a}):"marks"===n?Object(L.jsx)(Z,{history:ee.a}):Object(L.jsx)(H,{mediaType:n,filters:u,history:ee.a})}),Object(L.jsx)(_,{})]})}var ae=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function re(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,83)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))},se=new x.a({uri:"https://api-beta.anibel.net/graphql",cache:new h.a({typePolicies:{Media:{merge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(l.a)({existing:e},t)}}}})});g.a.render(Object(L.jsxs)(d.a.StrictMode,{children:[Object(L.jsx)(b.a,{client:se,children:Object(L.jsx)(ne,{})}),","]}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/avomova",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/avomova","/service-worker.js");ae?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):re(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):re(t,e)}))}}(),ie()}},[[62,1,2]]]);
//# sourceMappingURL=main.f1cf4c5d.chunk.js.map